function fixEvent(t){if((t=t||window.event).target||(t.target=t.srcElement),null==t.pageX&&null!=t.clientX){var e=document.documentElement,n=document.body;t.pageX=t.clientX+(e.scrollLeft||n&&n.scrollLeft||0),t.pageX-=e.clientLeft||0,t.pageY=t.clientY+(e.scrollTop||n&&n.scrollTop||0),t.pageY-=e.clientTop||0}return!t.which&&t.button&&(t.which=1&t.button?1:2&t.button?3:4&t.button?2:0),t}function getCoords(t){var e=t.getBoundingClientRect(),n=document.body,a=document.documentElement,l=window.pageYOffset||a.scrollTop||n.scrollTop,r=window.pageXOffset||a.scrollLeft||n.scrollLeft,o=a.clientTop||n.clientTop||0,i=a.clientLeft||n.clientLeft||0,s=e.top+l-o,f=e.left+r-i;return{top:Math.round(s),left:Math.round(f)}}function textAreaHeight(t){if(!t._tester){var e=t.cloneNode();e.style.position="absolute",e.style.zIndex=-2e6,e.style.visibility="hidden",e.style.height="1px",e.id="",e.name="",t.parentNode.appendChild(e),t._tester=e,t._offset=e.clientHeight-1}t._timer&&clearTimeout(t._timer),t._timer=setTimeout(function(){t._tester.style.width=t.clientWidth+"px",t._tester.value=t.value,t.style.height=t._tester.scrollHeight-t._offset+"px",t._timer=!1},1)}function f_tcalGetHTML(t){var e=f_tcalGetInputs(!0);if(e){var n=A_TCALCONF.cssprefix,a=A_TCALCONF.format,l=f_tcalParseDate(A_TCALCONF.today,A_TCALCONF.format);l||(l=f_tcalResetTime(new Date));var r=f_tcalParseDate(e.value,a);r||(r=f_tcalParseDate(A_TCALCONF.selected,A_TCALCONF.format)),r||(r=new Date(l)),t=t?f_tcalResetTime(t):new Date(r);var o=new Date(t);o.setDate(1),o.setDate(1-(7+o.getDay()-A_TCALCONF.weekstart)%7);for(var i,s='<table id="'+n+'Controls"><tbody><tr>'+(A_TCALCONF.yearscroll?'<td id="'+n+'PrevYear" '+f_tcalRelDate(t,-1,"y")+' title="'+A_TCALCONF.prevyear+'"></td>':"")+'<td id="'+n+'PrevMonth"'+f_tcalRelDate(t,-1)+' title="'+A_TCALCONF.prevmonth+'"></td><th>'+A_TCALCONF.months[t.getMonth()]+" "+t.getFullYear()+'</th><td id="'+n+'NextMonth"'+f_tcalRelDate(t,1)+' title="'+A_TCALCONF.nextmonth+'"></td>'+(A_TCALCONF.yearscroll?'<td id="'+n+'NextYear"'+f_tcalRelDate(t,1,"y")+' title="'+A_TCALCONF.nextyear+'"></td>':"")+'</tr></tbody></table><table id="'+n+'Grid"><tbody><tr>',f=0;f<7;f++)s+="<th>"+A_TCALCONF.weekdays[(A_TCALCONF.weekstart+f)%7]+"</th>";s+="</tr>";for(var c,d=new Date(o);d.getMonth()==t.getMonth()||d.getMonth()==o.getMonth();){s+="<tr>";for(var u=0;u<7;u++)i=[],c=d.getDate(),d.getMonth(),d.getMonth()!=t.getMonth()&&(i[i.length]=n+"OtherMonth"),0!=d.getDay()&&6!=d.getDay()||(i[i.length]=n+"Weekend"),d.valueOf()==l.valueOf()&&(i[i.length]=n+"Today"),d.valueOf()==r.valueOf()&&(i[i.length]=n+"Selected"),s+="<td"+f_tcalRelDate(d)+(i.length?' class="'+i.join(" ")+'">':">")+c+"</td>",d.setDate(++c);s+="</tr>"}return s+="</tbody></table>"}}function f_tcalRelDate(t,e,n){var n="y"==n?"FullYear":"Month",a=new Date(t);return e&&(a["set"+n](t["get"+n]()+e),a.getDate()!=t.getDate()&&a.setDate(0)),' onclick="f_tcalUpdate('+a.valueOf()+(e?",1":"")+')"'}function f_tcalResetTime(t){return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(12),t}function f_tcalCancel(){var t=A_TCALCONF.cssprefix,e=document.getElementById(t);e&&(e.style.visibility="");for(var n=f_tcalGetInputs(),a=0;a<n.length;a++)f_tcalRemoveClass(n[a],t+"Active")}function f_tcalUpdate(t,e){var n=f_tcalGetInputs(!0);if(n){d_date=new Date(t);var a=A_TCALCONF.cssprefix;if(e){var l=document.getElementById(a);if(!l||"visible"!=l.style.visibility)return;l.innerHTML=f_tcalGetHTML(d_date,n)}else n.value=f_tcalGenerateDate(d_date,A_TCALCONF.format),f_tcalCancel()}}function f_tcalOnClick(){var t=A_TCALCONF.cssprefix,e=t+"Active",n=f_tcalHasClass(this,e);if(f_tcalCancel(),!n){f_tcalAddClass(this,e);var a=f_getPosition(this,"Left"),l=f_getPosition(this,"Top")+this.offsetHeight,r=document.getElementById(t);r||((r=document.createElement("div")).onselectstart=function(){return!1},r.id=t,document.getElementsByTagName("body").item(0).appendChild(r)),r.innerHTML=f_tcalGetHTML(null),r.style.top=l+"px",r.style.left=a+this.offsetWidth-r.offsetWidth+"px",r.style.visibility="visible"}}function f_tcalParseDate(t,e){if(t){for(var n,a="^",l={},r=0,o=0;o<e.length;o++)n=e.charAt(o),A_TCALTOKENS_IDX[n]?(l[n]=++r,a+="("+A_TCALTOKENS_IDX[n].r+")"):a+=" "==n?"\\s":(n.match(/[\w\d]/)?"":"\\")+n;var i=new RegExp(a+"$");if(t.match(i)){var s,f=f_tcalResetTime(new Date);for(f.setDate(1),o=0;o<A_TCALTOKENS.length;o++)l[n=A_TCALTOKENS[o].t]&&(s=RegExp["$"+l[n]],f=A_TCALTOKENS[o].p(f,s));return f}}}function f_tcalGenerateDate(t,e){for(var n,a="",l=0;l<e.length;l++)n=e.charAt(l),a+=A_TCALTOKENS_IDX[n]?A_TCALTOKENS_IDX[n].g(t):n;return a}function f_tcalGetInputs(t){var e,a=document.getElementsByTagName("input"),l=[];for(n=0;n<a.length;n++)if((e=a[n]).type&&"text"==e.type&&f_tcalHasClass(e,"tcal")){if(t&&f_tcalHasClass(e,A_TCALCONF.cssprefix+"Active"))return e;l[l.length]=e}return t?null:l}function f_tcalHasClass(t,e){var n=t.className;if(!n)return!1;for(var a=n.split(" "),l=0;l<a.length;l++)if(a[l]==e)return!0;return!1}function f_tcalAddClass(t,e){if(!f_tcalHasClass(t,e)){var n=t.className;t.className=(n?n+" ":"")+e}}function f_tcalRemoveClass(t,e){var n=t.className;if(!n||-1==n.indexOf(e))return!1;for(var a=n.split(" "),l=[],r=0;r<a.length;r++)a[r]!=e&&(l[l.length]=a[r]);return t.className=l.join(" "),!0}function f_getPosition(t,e){for(var n,a=0,l=t;l;)a+=n=l["offset"+e],l=l.offsetParent;for(l=t;l!=document.body;)(n=l["scroll"+e])&&"scroll"==l.style.overflow&&(a-=n),l=l.parentNode;return a}function f_tcalInit(){if(document.getElementsByTagName){for(var t,e=f_tcalGetInputs(),n=0;n<e.length;n++)(t=e[n]).onclick=f_tcalOnClick,f_tcalAddClass(t,A_TCALCONF.cssprefix+"Input");for(window.A_TCALTOKENS_IDX={},n=0;n<A_TCALTOKENS.length;n++)A_TCALTOKENS_IDX[A_TCALTOKENS[n].t]=A_TCALTOKENS[n]}}function f_tcalAddOnload(t){if(document.addEventListener)window.addEventListener("load",t,!1);else if(window.attachEvent)window.attachEvent("onload",t);else{var e=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){e(),t()}}}var sliderElem=document.getElementById("slider"),thumbElem=sliderElem.children[0];thumbElem.ondragstart=function(){return!1},thumbElem.onmousedown=function(t){t=fixEvent(t);var e=getCoords(thumbElem),n=t.pageX-e.left,a=(t.pageY,e.top,getCoords(sliderElem));return document.onmousemove=function(t){var e=(t=fixEvent(t)).pageX-n-a.left;e<0&&(e=0);var l=sliderElem.offsetWidth-thumbElem.offsetWidth;e>l&&(e=l),thumbElem.style.left=e+"px"},document.onmouseup=function(){document.onmousemove=document.onmouseup=null},!1};var A_TCALCONF={cssprefix:"tcal",months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekdays:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],longwdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],yearscroll:!0,weekstart:0,prevyear:"Предыдущий год",nextyear:"Следующий год",prevmonth:"Предыдущий месяц",nextmonth:"Следующий месяц",format:"m/d/Y"},A_TCALTOKENS=[{t:"Y",r:"19\\d{2}|20\\d{2}",p:function(t,e){return t.setFullYear(Number(e)),t},g:function(t){return t.getFullYear()}},{t:"m",r:"0?[1-9]|1[0-2]",p:function(t,e){return t.setMonth(Number(e)-1),t},g:function(t){var e=t.getMonth()+1;return(e<10?"0":"")+e}},{t:"F",r:A_TCALCONF.months.join("|"),p:function(t,e){for(var n=0;n<12;n++)if(A_TCALCONF.months[n]==e)return t.setMonth(n),t},g:function(t){return A_TCALCONF.months[t.getMonth()]}},{t:"d",r:"0?[1-9]|[12][0-9]|3[01]",p:function(t,e){return t.setDate(Number(e)),t.getDate()!=e&&t.setDate(0),t},g:function(t){var e=t.getDate();return(e<10?"0":"")+e}},{t:"j",r:"0?[1-9]|[12][0-9]|3[01]",p:function(t,e){return t.setDate(Number(e)),t.getDate()!=e&&t.setDate(0),t},g:function(t){return t.getDate()}},{t:"l",r:A_TCALCONF.longwdays.join("|"),p:function(t,e){return t},g:function(t){return A_TCALCONF.longwdays[t.getDay()]}},{t:"S",r:"st|nd|rd|th",p:function(t,e){return t},g:function(t){return n_date=t.getDate(),n_date%10==1&&11!=n_date?"st":n_date%10==2&&12!=n_date?"nd":n_date%10==3&&13!=n_date?"rd":"th"}}];f_tcalAddOnload(f_tcalInit);